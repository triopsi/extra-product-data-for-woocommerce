jQuery(document).ready(function(t){new class{constructor(){this.init()}init(){t(document).on("keyup change",".exprdawc-input",this.updatePriceAdjustmentTable.bind(this)),t(".woocommerce").on("keyup change","input.qty",this.updatePriceAdjustmentTable.bind(this)),t('input[name="variation_id"]').on("change",this.updatePriceAdjustmentTable.bind(this)),this.updatePriceAdjustmentTable()}exprdawc_product_price(t){t=parseFloat(t).toFixed(2);var e={decimal_sep:exprdawc_frontend_settings.decimal_separator,currency_position:exprdawc_frontend_settings.currency_position,currency_symbol:exprdawc_frontend_settings.currency_symbol,trim_zeros:exprdawc_frontend_settings.currency_format_trim_zeros,num_decimals:exprdawc_frontend_settings.currency_format_num_decimals};if(e.num_decimals>0){var n=parseInt(t).toString().length+e.num_decimals;t=t.toString().substr(0,n+1)}else t=parseInt(t);var r=t=t.toString().replace(".",e.decimal_sep);console.log(t);var a='<span class="woocommerce-Price-currencySymbol">'+e.currency_symbol+"</span>";return console.log(a),"left"===e.currency_position?r=a+r:"right"===e.currency_position?r+=a:"left_space"===e.currency_position?r=a+" "+r:"right_space"===e.currency_position&&(r=r+" "+a),console.log(r),r='<span class="woocommerce-Price-amount amount">'+r+"</span>"}sanitizeValue(t){return t.replace(/[^\p{L}\p{N}]/gu," ").replace(/\s+/g," ").trim()}getFieldType(t){return t.is("input")?t.attr("type"):t.is("select")?"select":t.is("textarea")?"textarea":t.is("option")?"option":""}getCurrentProductPrice(){const e=t(".exprdawc-price-adjustment").data("product-type"),n=t('input[name="variation_id"]').val(),r=t("[data-product_variations]").data("product_variations");if("variable"===e&&r){const e=r.find(t=>t.variation_id==n);return e?e.display_price:parseFloat(t(".exprdawc-price-adjustment").data("product-base-price"))}return parseFloat(t(".exprdawc-price-adjustment").data("product-base-price"))}updatePriceAdjustmentTable(){let e=0;const n=t(".exprdawc-price-adjustment");if(t(".exprdawc-price-adjustment-field").length){n.empty(),n.append(`\n                    <table class="exprdawc_price_adjustment_table">\n                        <thead>\n                            <tr>\n                                <th>${exprdawc_frontend_settings.option}</th>\n                                <th>${exprdawc_frontend_settings.price}</th>\n                            </tr>\n                        </thead>\n                        <tbody></tbody>\n                    </table>\n                `);const r=parseInt(t(".woocommerce input.qty").val())||1,a=r*parseFloat(this.getCurrentProductPrice())||0,i=t(".exprdawc-price-adjustment").data("product-name")||"",s=n.find("tbody");s.empty(),s.append(`\n                    <tr>\n                        <td>${r} x ${i}</td>\n                        <td>${this.exprdawc_product_price(a)}</td>\n                    </tr>\n                `);const c=this;t(".exprdawc-input").each(function(){if(""==t(this).val())return;if(t(this).prop("disabled"))return;const n=c.getFieldType(t(this)),a=["checkbox","radio"].includes(n),i="option"===n,d=t(this).is(":checked"),p=t(this).is(":selected");t(this).prop("disabled");const o=t(this).closest("select").prop("disabled");if(a&&!d||i&&(!p||o))return;const l=t(this).data("label")||"",u=t(this).val();if("select"===n&&t(this).find("option:selected"),"select"===n){const e=t(this).find("option:selected");if(!e.data("price-adjustment"))return void s.append(`\n                                <tr>\n                                    <td>${l}<p><small>${c.sanitizeValue(e.text())}</small></p></td>\n                                    <td>${c.exprdawc_product_price(0)}</td>\n                                </tr>\n                            `)}else if(!t(this).data("price-adjustment"))return void s.append(`\n                            <tr>\n                                <td>${l}<p><small>${c.sanitizeValue(u)}</small></p></td>\n                                <td>${c.exprdawc_product_price(0)}</td>\n                            </tr>\n                        `);let _=0;if("select"===n){const e=t(this).find("option:selected");e.data("price-adjustment")&&(_=parseFloat(e.data("price-adjustment"))||0)}else _=parseFloat(t(this).data("price-adjustment"))||0;t("[data-qty-based]").length&&(_*=r);let m="";_>0?m="+":_<0&&(m="-"),e+=_,s.append(`\n                        <tr>\n                            <td>${l}<p><small>${c.sanitizeValue(u)}</small></p></td>\n                            <td>${m}${c.exprdawc_product_price(_)}</td>\n                        </tr>\n                    `)});const d=a+e;s.append(`\n                    <tr>\n                        <td><strong>${exprdawc_frontend_settings.total}</strong></td>\n                        <td><strong>${this.exprdawc_product_price(d)}</strong></td>\n                    </tr>\n                `)}}}});
